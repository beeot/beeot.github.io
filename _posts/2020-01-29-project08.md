---
<<<<<<< HEAD
title: "data statics #1"
excerpt: "Linear Regression on the number of bees"
=======
title: "Bee Count #2"
excerpt: "Counting bees in a frame"
>>>>>>> 7518ae6bf19fbbbe68712188e874c4f7ca63b0fc

categories:
  - project
tags:
<<<<<<< HEAD
  - Linear Regression
---

=======
  - raspberry pi
  - open cv
  - Linear Regression
---

## Original Video

<iframe width="560" height="315" src="https://www.youtube.com/embed/jK2i7e1Vrp0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

## Noise Reduction

![](https://raw.githubusercontent.com/beeot/beeot.github.io/master/_docs/project/noise_reduction.png)

Dilation and Erosion을 이용해서 노이즈를 제거

![](https://raw.githubusercontent.com/beeot/beeot.github.io/master/_docs/project/dliation_erosion.png)

[](http://what-when-how.com/introduction-to-video-and-image-processing/morphology-introduction-to-video-and-image-processing-part-2/)

## Objects Segments

![](https://raw.githubusercontent.com/beeot/beeot.github.io/master/_docs/project/object_segment.png)

연결되어 있는 픽셀을 찾아서 각각 다른 색으로 할당해준다

## Draw bounding box  

![](https://raw.githubusercontent.com/beeot/beeot.github.io/master/_docs/project/vertical.png)

각각의 오브젝트에 대해 세로축 최소, 최대 픽셀의 좌표를 구해서 직선을 그림

![](https://raw.githubusercontent.com/beeot/beeot.github.io/master/_docs/project/vertical.png)

가로축으로 동일하게 

>>>>>>> 7518ae6bf19fbbbe68712188e874c4f7ca63b0fc
## Linear Regression

![](https://raw.githubusercontent.com/beeot/beeot.github.io/master/_docs/project/linear_reg.png)

영상에서 50개의 이미지를 뽑아 foreground pixel의 수를 측정해주고, 해당 이미지에서 벌의 수를 측정하여
Linear Regression으로 foreground pixel 수에 대한 벌의 수의 식을 구하여 주었다.

<<<<<<< HEAD
statsmodels 패키지에서 OLS 클래스를 이용하여 선형회귀분석(Linear Regression)을 구현하였다.

<img 
=======
m : 4102.657959183672

b : 9659.747591836749

y mean : 28942.24

SStot : 4170542583.12

SSres : 2108646797.68849

R square : 0.4943950923260919
>>>>>>> 7518ae6bf19fbbbe68712188e874c4f7ca63b0fc

## Result

<iframe width="560" height="315" src="https://www.youtube.com/embed/AtOpMl0Zkes" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<<<<<<< HEAD
=======

>>>>>>> 7518ae6bf19fbbbe68712188e874c4f7ca63b0fc
위에서 구한 식을 이용해 frame마다 벌의 수를 측정하여 화면에 표시해 주었다.

원본 영상에는 벌집 입구에 있는 나무에도 벌이 붙어있지만, 우리가 처리하는 영상에서는 해당 부분의 벌을 포함시키지 않는다.

때문에 처음에는 벌의 개수가 잘 맞지 않았으나, 우리가 처리하는 이미지에서 보이는 벌의 개수로 다시 추정한 결과
조금 더 정확도가 개선이 되었다.

그러나 참고하는 논문과 사용하는 영상의 구도와 배경이 많이 다르기 때문에 논문에 나와있는 R square 0.97은 달성하지 못하였고
실제 농장에서 데이터를 얻어오는 것이 필요해보인다.





